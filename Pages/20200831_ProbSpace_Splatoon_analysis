◆2020/8/31~2020/10/20 ProbSpace スプラトゥーン勝者予測コンペ
⇒ target：対戦の勝者
⇒ 評価指標：accuracy

■ EDAの結果見えてきたこと(ドメイン知識に関する仮定と検証)
・学習用データと検証用データに分布の違いはあるのか？
⇒ カラムごとのヒストグラムを作成した結果、分布の違いは特にないと判断した。

・欠損値の取り扱いは？
⇒ "〇〇_rank"列に欠損値が多い。⇒ "lobby_mode"がregularの時はrankの値は存在しない
⇒ 必ずしも4人対4人で対戦しなければいけないわけではない ⇒ A4-○○、B4_○○にnanが入ることがある(最頻値で置換)
⇒ 1人(または2人)少ないチームはほとんどの確率で負けている ⇒ 各チームの対戦人数を特徴量として加える。済

・カテゴリ変数のエンコーディング手法は？
⇒ 基本的にはlabel-encording(onehotと大差なし)
⇒ target-encodingもやってみる。⇒ リークしてしまいCVの値がかなり良くなってしまう。

・1レコード内にAチームとBチームの情報があってよいのか？
⇒ 1レコードをチーム別で2カラムに分離する(単純に学習データ量(レコード数)が2倍になる)
⇒ 上記はNGである ⇒ 各チームの組み合わせにより勝敗が決定しているため。

・カラムに存在する「A○○」「B○○」とは?
⇒ スプラトゥーンは2人ずつ2組に分かれ対戦する。
⇒ 従って、チーム内の武器、ランク、ウデマエの組み合わせが重要である。
⇒ 「A-1武器_A-2武器」のように2つのカラムを合成して1つの特徴量とするのもよさそう。
⇒ 各チームにおける遠距離、近接武器の人数を特徴量として加える。済

・武器に強い弱いはあるのか?
⇒ ある。性能もさることながら、扱いやすさと使用キャラクターとの親和性も重要らしい。
⇒「武器使用ランキング上位」「武器毎の勝率」的な特徴量を加えてみる。済

・ランクとレベルの関連性
⇒ レベルが低いのにランクが高い、もしくはランクが低いのにレベルが高い可能性がある ⇒ レベル平均が高いチームが勝利するとは限らない。
⇒ 'nawabari(regular)'バトルだとレベルは上がるがランクは上がらない
⇒ ガチマッチ('nawabari'以外)勢はレベル低、ランク高となる可能性が高い

・対戦ルールと使用武器の関連性
⇒ ナワバリバトル、ガチエリア、ガチヤグラ、ガチホコ、ガチアサリ(計5種類)の対戦ルールが存在する。
⇒ 特定のルールにおいて勝利しやすい武器も存在するらしい。
⇒ 「対戦ルール毎の勝率」的なものを特徴量として加えてみる。

・「スペシャル」と対戦ルールと勝率の相関性
⇒ 「スペシャル」とは、インクを一定量塗ることでゲージを溜め、放つことができる特別な攻撃。
⇒ 使用武器によって使用できるスペシャルが異なる。
⇒ 「使用スペシャル毎の勝率」的な特徴量を加えてみる。

・対戦ステージと使用武器と勝率の関連性
⇒ ステージ毎に有利となる武器が存在するらしい(例：見晴らしの良いステージの場合は長距離武器が好まれる等)
⇒ ステージ面積をうまく使えないか。。

・ウデマエ(熟練度)と使用武器と勝率の関係
⇒ 熟練度の高い人は希少な武器を持っているため、勝率が高い?
⇒ 「熟練度毎の勝率」的な特徴量を加えてみる
⇒ 各チームにおけるレベルの合計または平均(数値)が高いほうが勝つ傾向にありそう？

・全体を通して、カラムごとに関連性がありそうであるため、複数のカテゴリ変数を"_"などで結合し、1つの特徴量としてみると良さそう
・lobby-modeが「regular」の場合には○○-rankのカラムはすべてnanが入っている。
  ⇒  lobby-modeを「regular」と「gachi」のそれぞれ異なる特徴量のモデルを作成する必要がある?
  
・pseudo_labelingが非常に効いた。
  ⇒　さらに、lightgbmよりcatboostの方が安定して精度が良い
